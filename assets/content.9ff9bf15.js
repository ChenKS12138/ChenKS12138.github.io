import{_ as e}from"./ArticleWrapper.vue_vue_type_script_setup_true_lang.d8f80479.js";import{c,w as p,o as u,a as n,b as s}from"./app.300cb24c.js";import"./dayjs.min.28e220c7.js";const l=n("div",{class:"markdown-body"},[n("h1",null,"\u524D\u8A00"),n("p",null,[n("code",null,"redux"),s("\u662F\u4E00\u4E2A"),n("code",null,"JavaScript"),s("\u7684\u72B6\u6001\u5BB9\u5668\uFF0C"),n("code",null,"redux-saga"),s("\u662F redux \u7684\u4E00\u4E2A\u4E2D\u95F4\u4EF6\uFF0C"),n("code",null,"react-redux"),s("\u662F\u4E00\u4E2A\u901A\u8FC7\u9AD8\u9636\u51FD\u6570\u7684\u65B9\u5F0F\u5B9E\u73B0\u8FDE\u63A5 redux \u548C react \u7EC4\u4EF6\u7684\u5E93\u3002"),n("code",null,"redux"),s("\u6709"),n("code",null,"state"),s(","),n("code",null,"action"),s(","),n("code",null,"dispatch"),s(","),n("code",null,"reducer"),s("\u7684\u6982\u5FF5\u3002\u901A\u8FC7 dispatch \u4E00\u4E2A action\uFF0C\u8C03\u7528 reducer \u4EA7\u751F\u53E6\u4E2A state\uFF0C\u66FF\u6362 store \u91CC\u7684 state\uFF0C\u5B9E\u73B0\u72B6\u6001\u7684\u66F4\u65B0\uFF0Creact \u518D\u901A\u8FC7 diff \u7B97\u6CD5\u5F97\u5230\u6700\u5C0F\u7684\u9700\u8981\u66F4\u65B0\u7684 dom\uFF0C\u5B9E\u73B0\u9875\u9762\u66F4\u65B0\u3002")]),n("h1",null,"\u5173\u4E8E Generator"),n("p",null,[n("code",null,"redux-saga"),s("\u4F7F\u7528\u4E86 ES6 \u7684 Generator\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u5BF9 Generator \u6709\u4E2A\u8BA4\u8BC6\u3002\u9996\u5148\u9700\u8981\u7406\u89E3"),n("code",null,"\u8FED\u4EE3\u5668"),s(","),n("code",null,"\u751F\u6210\u5668"),s(","),n("code",null,"\u53EF\u8FED\u4EE3\u5BF9\u8C61"),s("\u3002\u751F\u6210\u5668\u662F\u4E00\u4E2A Generator Function\uFF0C\u53EF\u4EE5\u8FD4\u56DE\u4E00\u4E2A\u8FED\u4EE3\u5668\u3002\u53EF\u4EE5\u901A\u8FC7\u4E0D\u65AD\u8C03\u7528\u8FED\u4EE3\u5668\u7684 next \u65B9\u6CD5\u8FDB\u884C\u8FED\u4EE3\u3002\u53EF\u8FED\u4EE3\u5BF9\u8C61\u662F\u4E00\u4E2A\u5177\u6709[Symbol.iterator]\u7684\u5BF9\u8C61\uFF0C\u5E38\u89C1\u7684\u50CF"),n("code",null,"Array"),s("\uFF0C"),n("code",null,"Map"),s("\uFF0C"),n("code",null,"Set"),s("\u90FD\u662F\u5C5E\u4E8E\u53EF\u8FED\u4EE3\u5BF9\u8C61\uFF0C\u5F53\u7136\u6211\u4EEC\u4E5F\u53EF\u4EE5\u6784\u9020\u81EA\u5DF1\u7684\u53EF\u8FED\u4EE3\u5BF9\u8C61\u3002")]),n("pre",{class:"language-javascript"},[n("code",{class:"language-javascript"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"BookShelf"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("books "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"bookName"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("books"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("bookName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"["),s("Symbol"),n("span",{class:"token punctuation"},"."),s("iterator"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" index "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"while"),s(),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("books"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"yield"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("books"),n("span",{class:"token punctuation"},"["),s("index"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"const"),s(" bookShelf "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BookShelf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
bookShelf`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"book1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
bookShelf`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"book2"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
bookShelf`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"book3"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" book "),n("span",{class:"token keyword"},"of"),s(" bookShelf"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("book"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token comment"},"// book1"),s(`
`),n("span",{class:"token comment"},"// book2"),s(`
`),n("span",{class:"token comment"},"// book3"),s(`
`)])]),n("h1",null,"\u4F7F\u7528 Generator Function \u5904\u7406\u5F02\u6B65\u51FD\u6570"),n("p",null,[s("ES2017 \u7684"),n("code",null,"async"),s(","),n("code",null,"await"),s("\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u79CD\u540C\u6B65\u7684\u5199\u6CD5\u6765\u7F16\u5199\u5F02\u6B65\u903B\u8F91\u7684\u51FD\u6570\uFF0C\u4F46\u6211\u4EEC\u4E5F\u53EF\u4EE5\u901A\u8FC7"),n("code",null,"Promise"),s("\u52A0\u4E0A"),n("code",null,"Generator Function"),s("\u8FBE\u5230\u548C"),n("code",null,"async"),s(","),n("code",null,"await"),s("\u7C7B\u4F3C\u4E00\u6837\u7684\u6548\u679C\u3002\u5E76\u4E14\u540E\u8005\u66F4\u5229\u4E8E\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u8FD9\u4E5F\u662F"),n("code",null,"redux-saga"),s("\u5904\u7406\u526F\u4F5C\u7528\u7684\u65B9\u5F0F\u3002\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528 Generator Function \u4EA7\u751F\u4E00\u4E2A Iterator\uFF0C\u5BF9\u5176\u8FDB\u884C\u8FED\u4EE3\uFF0C\u786E\u4FDD\u6BCF\u6B21\u8FED\u4EE3\u7684\u7ED3\u679C\u7B26\u5408\u9884\u671F\uFF0C\u5373\u6D4B\u8BD5\u6210\u529F\u3002")]),n("pre",{class:"language-javascript"},[n("code",{class:"language-javascript"},[n("span",{class:"token comment"},`/**
 * @param {number} second
 */`),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"sleep"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"second"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
  `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Promise"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("resolve"),n("span",{class:"token punctuation"},","),s(" reject")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("second "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"reject"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"second less than 0"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token function"},"setTimeout"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Sleep "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("second"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"ms"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(" second"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},`/**
 * @param {GeneratorFunction} generatorFunc
 */`),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"asyncWrapper"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"generatorFunc"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" iterator "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"generatorFunc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},`/**
   * @param {Iterator} iterator
   * @param {IteratorReturnResult} current
   */`),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"handleIterate"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("iterator"),n("span",{class:"token punctuation"},","),s(" current")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("current "),n("span",{class:"token operator"},"&&"),s(" current"),n("span",{class:"token punctuation"},"."),s("done"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("current "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"handleIterate"),n("span",{class:"token punctuation"},"("),s("iterator"),n("span",{class:"token punctuation"},","),s(" iterator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("current"),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token keyword"},"instanceof"),s(),n("span",{class:"token class-name"},"Promise"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      current`),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"result"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"handleIterate"),n("span",{class:"token punctuation"},"("),s("iterator"),n("span",{class:"token punctuation"},","),s(" iterator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),s("result"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"reason"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"handleIterate"),n("span",{class:"token punctuation"},"("),s("iterator"),n("span",{class:"token punctuation"},","),s(" iterator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"throw"),n("span",{class:"token punctuation"},"("),s("reason"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token function"},"handleIterate"),n("span",{class:"token punctuation"},"("),s("iterator"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token function"},"asyncWrapper"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"sleep start"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" str1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"yield"),s(),n("span",{class:"token function"},"sleep"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("str1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" str2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"yield"),s(),n("span",{class:"token function"},"sleep"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1000"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("str2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"sleep error: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("error"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"sleep end"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// sleep start"),s(`
`),n("span",{class:"token comment"},"// Sleep 1000ms"),s(`
`),n("span",{class:"token comment"},"// sleep error: second less than 0"),s(`
`),n("span",{class:"token comment"},"// sleep end"),s(`
`)])]),n("h1",null,"\u5173\u4E8E redux-saga"),n("p",null,"redux-saga \u4F7F\u5F97\u526F\u4F5C\u7528\u66F4\u5BB9\u6613\u88AB\u7BA1\u7406\u3002\u5BF9\u4E8E\u4E00\u4E9B\u5F02\u6B65\u51FD\u6570\u7684\u8C03\u7528\uFF0C\u5E76\u4E0D\u662F\u5728 Generator \u51FD\u6570\u5185\u90E8\u6267\u884C\uFF0C\u800C\u662F\u7C7B\u4F3C\u901A\u8FC7 yield \u4E00\u4E2A Promise \u7684\u65B9\u5F0F\uFF0C\u5728\u5916\u90E8\u8C03\u7528\u540E\uFF0C\u5916\u90E8\u901A\u8FC7 next \u65B9\u6CD5\uFF0C\u8BA9 yield \u5DE6\u8FB9\u5F97\u5230\u8FD4\u56DE\u503C\u3002\u8FD9\u4F7F\u5F97\u751F\u6210\u5668\u4E2D\u7684\u5F02\u6B65\u903B\u8F91\u5B8C\u5168\u53EF\u4EE5\u88AB\u6D4B\u8BD5\u3002"),n("p",null,[n("code",null,"redux-saga"),s("\u4E2D\u7684\u51E0\u4E2A\u6982\u5FF5\u3002"),n("code",null,"saga\u8F85\u52A9\u51FD\u6570"),s("\uFF0C\u7528\u4E8E\u5F53\u7279\u5B9A\u7684 action\uFF08\u6216\u8005\u662F\u4F7F\u7528"),n("code",null,"*"),s("\u540C\u914D\u6240\u6709\u7684 action\uFF09\u88AB dispatch \u5230 store \u65F6\u6D3E\u53D1\u4EFB\u52A1\uFF0C\u4F7F\u7528\u4E00\u5B9A\u7684 saga \u5904\u7406\u3002"),n("code",null,"saga"),s("\uFF0C\u4E00\u4E2A\u53EF\u4EE5\u591A\u6B21 yield effect \u7684 Generator Function\uFF0C\u901A\u8FC7 yield effect\uFF0C\u5904\u7406\u5F02\u6B65\u903B\u8F91\u3002"),n("code",null,"effect"),s("\uFF0C\u53EF\u4EE5\u901A\u8FC7"),n("code",null,"redux-saga/effects"),s("\u7684\u5185\u7F6E\u51FD\u6570\u50CF"),n("code",null,"call"),s(","),n("code",null,"apply"),s(","),n("code",null,"cps"),s(","),n("code",null,"put"),s("\u521B\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A\u666E\u901A\u7684 Promise \u5BF9\u8C61\uFF0C\u6B64\u65F6 yield \u7684\u5DE6\u503C\u5C31\u662F Promise \u7684 resolve \u7684 value\uFF0C\u751A\u81F3\u53EF\u4EE5 yield \u4E00\u4E2A\u666E\u901A\u7684 JavaScript \u5BF9\u8C61\u3002")]),n("h1",null,"\u5173\u4E8E redux-thunk"),n("p",null,[n("code",null,"redux-thunk"),s("\u4E5F\u662F"),n("code",null,"redux"),s("\u91CC\u5E38\u7528\u7684\u4E00\u4E2A\u4E2D\u95F4\u4EF6\uFF0C\u5B83\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7 dispatch \u4E00\u4E2A\u51FD\u6570\u6765\u5904\u7406\u5F02\u6B65\u903B\u8F91\uFF0C\u51FD\u6570\u7684\u7B2C\u4E00/\u4E8C\u4E2A\u53C2\u6570\u5206\u522B\u662F"),n("code",null,"dispatch"),s("\uFF0C"),n("code",null,"getState"),s("\u3002\u6838\u5FC3\u4EE3\u7801\u5F88\u5C11\uFF0C\u53EA\u6709 20 \u884C\u4E0D\u5230\u3002")]),n("pre",{class:"language-javascript"},[n("code",{class:"language-javascript"},[n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createThunkMiddleware"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"extraArgument"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"{"),s(" dispatch"),n("span",{class:"token punctuation"},","),s(" getState "),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
    `),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"next"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
    `),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"action"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"typeof"),s(" action "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"function"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"action"),n("span",{class:"token punctuation"},"("),s("dispatch"),n("span",{class:"token punctuation"},","),s(" getState"),n("span",{class:"token punctuation"},","),s(" extraArgument"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`

      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),s("action"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("p",null,[s("\u4F5C\u4E3A\u4E2D\u95F4\u4EF6\u4F1A\u88AB"),n("code",null,"redux"),s("\u4F9D\u6B21\u8C03\u7528")])],-1),g="redux-saga\u521D\u8BD5",y="2020-06-13T22:45:12.000Z",w=["JavaScript"],h="./redux-saga.png",x={__name:"content",setup(k,{expose:t}){const a={title:"redux-saga\u521D\u8BD5",date:"2020-06-13T22:45:12.000Z",tags:["JavaScript"],coverImage:"./redux-saga.png"};return t({frontmatter:a}),(i,r)=>{const o=e;return u(),c(o,{frontmatter:a},{default:p(()=>[l]),_:1})}}};export{h as coverImage,y as date,x as default,w as tags,g as title};
