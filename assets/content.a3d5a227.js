import{_ as p}from"./ArticleWrapper.vue_vue_type_script_setup_true_lang.8e0480e5.js";import{c,w as e,o as u,a as n,A as l,b as s}from"./app.c042c741.js";import"./dayjs.min.28e220c7.js";const k="/assets/9.e74cb09c.png",i="/assets/4.16024bea.png",r="/assets/3.062816b5.png",d="/assets/10.b047e4df.png",f="/assets/example.18ab0b6a.gif",m=n("div",{class:"markdown-body"},[n("h1",null,"\u524D\u8A00"),n("p",null,"\u8FD9\u662F\u4FE1\u606F\u5B89\u5168\u7EFC\u5408\u5B9E\u9A8C\u5B9E\u8DF5\u5468\u7684\u5927\u4F5C\u4E1A\uFF0C\u57FA\u4E8E\u6B64\u6211\u91CD\u65B0\u5B66\u4E60\u4E86 Diffie-Hellman \u7B97\u6CD5\uFF0CTCP \u7F51\u7EDC\u901A\u4FE1\uFF0C\u8FD8\u6709 protobuf \u7684\u4F7F\u7528\uFF0C\u4E5F\u5BF9 Electron \u548C Nodejs \u7684 Stream \u4E5F\u6709\u4E86\u66F4\u4E3A\u6DF1\u523B\u7684\u4E86\u89E3\u3002"),n("p",null,[n("a",{href:"https://github.com/chenks12138/chatroom"},"https://github.com/chenks12138/chatroom")]),n("h1",null,"Diffie-Hellman \u7B97\u6CD5"),n("p",null,"\u8FD9\u662F\u57FA\u4E8E\u79BB\u6563\u5BF9\u6570\u95EE\u9898\u7684\u7B97\u6CD5\uFF0C\u53EF\u4EE5\u4F7F\u7528 Diffie-Hellman \u7B97\u6CD5\u5728\u4E00\u4E2A\u4E0D\u5B89\u5168\u7684\u4FE1\u9053\u91CC\u8BA9\u53CC\u65B9\u534F\u5546\u4E00\u4E2A\u5BC6\u94A5\u3002\u8FD9\u91CC\u6211\u4EEC\u7528 Alice \u548C Bob \u6765\u8868\u793A\u53CC\u65B9\uFF0C\u539F\u6839 g \u548C\u4E00\u4E2A\u5927\u8D28\u6570 p \u662F\u534F\u8BAE\u4E2D\u516C\u5F00\u7684\uFF0C\u53CC\u65B9\u5148\u5206\u522B\u9009\u62E9\u4E00\u4E2A\u79D8\u5BC6\u6574\u6570 a\u3001b\uFF0C\u8BA1\u7B97\u51FA\u516C\u94A5 A=g^a mod p,B=g^b mod p\u3002\u5C06 A \u548C B \u516C\u5F00\uFF0CAlice \u548C Bob \u53EF\u4EE5\u5206\u522B\u8BA1\u7B97\u51FA\u534F\u5546\u5BC6\u94A5 Sab=B^a mod p = A^b mod p\u3002"),n("p",null,"\u5728\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u5904\u7406\u7684\u4E0D\u6B62\u53CC\u65B9\uFF0C\u800C\u662F\u4E09\u65B9\u3002\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u8C03\u6574\u534F\u5546\u5BC6\u94A5\u4E3A Sabc = Sab^c mod p = Sbc^a mod p = Sac^b mod p\u3002"),n("p",null,[n("img",{src:l,alt:"\u4E09\u65B9\u534F\u5546\u5BC6\u94A5"})]),n("p",null,"\u540C\u7406\uFF0C\u9012\u63A8\u4E0B\u53BB\u4E5F\u53EF\u4EE5\u8FDB\u884C\u56DB\u65B9\u7684\u5BC6\u94A5\u534F\u5546\uFF0C\u4EE5\u53CA\u591A\u65B9\u7684\u5BC6\u94A5\u534F\u5546\u3002"),n("p",null,[n("img",{src:k,alt:"\u56DB\u65B9\u534F\u5546\u5BC6\u94A5"})]),n("h1",null,"\u804A\u5929\u5BA4\u7F51\u7EDC\u901A\u4FE1\u7684\u8BBE\u8BA1"),n("h2",null,"\u62B9\u5E73 Server \u548C Client\uFF0C\u6BCF\u4E2A\u4EBA\u90FD\u662F Peer"),n("p",null,[n("img",{src:i,alt:"BroadcastHub"})]),n("p",null,"\u7531\u4E8E\u4F7F\u7528\u7684\u662F TCP \u4F5C\u4E3A\u7F51\u7EDC\u534F\u8BAE\uFF0C\u5FC5\u7136\u6709 Server \u548C Client \u7684\u6982\u5FF5\u3002\u6211\u4F7F\u7528\u4E86 BroadcastHub\uFF0C\u4F7F\u4ED6\u4F5C\u4E3A\u4E00\u4E2A\u7C7B\u4F3C\u96C6\u7EBF\u5668\u7684\u5B58\u5728\uFF0C\u8D1F\u8D23\u8F6C\u53D1\u5411\u6240\u6709 peer \u5E7F\u64AD\u6240\u6709\u6536\u5230\u7684\u6D88\u606F\u3002\u6BCF\u4E2A peer \u90FD\u4F1A\u76F4\u63A5\u7684\uFF08serverPeer\uFF09\u6216\u8005\u95F4\u63A5\u7684\uFF08clientPeer\uFF09\u4E0E BroadcastHub \u8FDE\u63A5\u3002"),n("pre",{class:"language-typescript"},[n("code",{class:"language-typescript"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"BroadcastHub"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"private"),s(" hub"),n("span",{class:"token operator"},":"),s(" HubStream"),n("span",{class:"token punctuation"},";"),s(`
  serverPort`),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hub "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HubStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("portA"),n("span",{class:"token punctuation"},","),s(" portB"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createTeleports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addPort"),n("span",{class:"token punctuation"},"("),s("portA"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("serverPort "),n("span",{class:"token operator"},"="),s(" portB"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"addSocket"),n("span",{class:"token punctuation"},"("),s("socket"),n("span",{class:"token operator"},":"),s(" Socket"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addPort"),n("span",{class:"token punctuation"},"("),s("socket"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"removeSocket"),n("span",{class:"token punctuation"},"("),s("socket"),n("span",{class:"token operator"},":"),s(" Socket"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removePort"),n("span",{class:"token punctuation"},"("),s("socket"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    socket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("hub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"HubStream"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"stream"),n("span",{class:"token punctuation"},"."),s("Duplex "),n("span",{class:"token punctuation"},"{"),s(`
  ports`),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"super"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pipe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"addPort"),n("span",{class:"token punctuation"},"("),s("port"),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    port`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"on"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"data"'),n("span",{class:"token punctuation"},","),s(" chunk "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        port`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pause"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("port"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"removePort"),n("span",{class:"token punctuation"},"("),s("port"),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" index "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findIndex"),n("span",{class:"token punctuation"},"("),s("one "),n("span",{class:"token operator"},"=>"),s(" one "),n("span",{class:"token operator"},"==="),s(" port"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"splice"),n("span",{class:"token punctuation"},"("),s("index"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      port`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"_read"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resume"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"_write"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token operator"},":"),s(" Buffer"),n("span",{class:"token punctuation"},","),s(" encoding"),n("span",{class:"token operator"},":"),s(" BufferEncoding"),n("span",{class:"token punctuation"},","),s(" done"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" waiting "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("waiting "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"done"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},","),s(" encoding"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        waiting`),n("span",{class:"token operator"},"--"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("waiting "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token function"},"done"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"_destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unpipe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("ports"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),s("one "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      one`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createTeleports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},","),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"var"),s(" portA"),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},","),s(" portB"),n("span",{class:"token operator"},":"),s(" stream"),n("span",{class:"token punctuation"},"."),s("Duplex"),n("span",{class:"token punctuation"},";"),s(`
  portA `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"stream"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Duplex"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"read"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      portB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resume"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},","),s(" enc"),n("span",{class:"token punctuation"},","),s(" callback"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("portB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},","),s(" enc"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        portA`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pause"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token function"},"callback"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  portB `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"stream"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Duplex"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"read"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      portA`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resume"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},","),s(" enc"),n("span",{class:"token punctuation"},","),s(" callback"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("portA"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},","),s(" enc"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        portB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pause"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token function"},"callback"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"["),s("portA"),n("span",{class:"token punctuation"},","),s(" portB"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("p",null,"BroadcastHub \u7684\u6838\u5FC3\u662F HubStream\uFF0CHubStream \u662F\u4E00\u4E2A\u53CC\u5411\u6D41\uFF0C\u5B83\u4F1A\u8BB2\u6240\u6709\u7684\u8F93\u5165\u4F20\u7ED9\u8F93\u51FA\uFF0C\u5B83\u7684\u7EF4\u62A4\u4E86\u4E00\u4E2A subStreams \u4F5C\u4E3A\u8F93\u5165\u6765\u6E90\u548C\u8F93\u5165\uFF0C\u4EE5\u8FBE\u5230\u5E7F\u64AD\u7684\u6548\u679C\u3002"),n("p",null,"\u4F7F\u7528\u4E86 teleportStream \u8FBE\u5230\u8FDE\u63A5 BroadcastHub \u548C serverPeer \u7684\u76EE\u7684\uFF0C\u5F53\u6211\u4EEC\u5411 portA \u8F93\u5165\u6570\u636E\u65F6\uFF0CportB \u4F1A\u6709\u8F93\u5165\uFF0C\u53CD\u4E4B\u540C\u7406\u3002"),n("h2",null,"peer \u5B58\u6D3B\u68C0\u6D4B"),n("p",null,[n("img",{src:r,alt:"heartbeat"})]),n("p",null,"\u8FDB\u884C\u534F\u5546\u524D\uFF0C\u6BCF\u4E2A peer \u90FD\u9700\u8981\u4E86\u89E3\u5F53\u524D\u6E05\u695A\u5F53\u524D\u7684\u623F\u95F4\u91CC\u6709\u591A\u5C11\u4E2A peer\uFF0C\u56E0\u6B64\u6211\u901A\u8FC7\u4E86\u5B9A\u65F6\u53D1\u9001\u5FC3\u8DF3\u5305\u7684\u65B9\u5F0F\uFF0C\u8BA9\u6BCF\u4E2A peer \u90FD\u7EF4\u62A4\u4E86\u4E00\u4E2A peerList\uFF0C\u6765\u8BB0\u5F55\u5B58\u6D3B peer\u3002"),n("p",null,[s("\u4E0D\u4F7F\u7528 server \u7AEF\u7684 socket \u8FDE\u63A5\u6570\u662F\u6709\u7F18\u7531\u7684\uFF0C\u5982\u679C\u5728\u8FD9\u5C42\u529F\u80FD\u4E0A\u4F9D\u8D56\u4E86 TCP Socket \u80FD\u529B\uFF0C\u5C31\u8FDD\u80CC\u4E86"),n("code",null,"\u62B9\u5E73Server\u548CClient\uFF0C\u6BCF\u4E2A\u4EBA\u90FD\u662FPeer"),s("\u7684\u521D\u8877\u3002\u6B64\u5916\uFF0CServer \u4E0A\u7684\u8FDE\u63A5\u4E5F\u4E0D\u4E00\u5B9A\u90FD\u662F Peer\uFF0C\u76F4\u63A5\u4F7F\u7528"),n("code",null,"nc"),s("\u4E5F\u662F\u53EF\u4EE5\u8FDE\u63A5 Server \u7684\uFF0C\u6709\u80FD\u529B\u53D1\u9001\u5FC3\u8DF3\u5305\u662F\u4F5C\u4E3A\u8FD9\u662F\u4E00\u4E2A\u5408\u6CD5 peer \u7684\u5FC5\u8981\u6761\u4EF6\u3002")]),n("h2",null,"\u8FDB\u884C\u5BC6\u94A5\u534F\u5546"),n("p",null,[n("img",{src:d,alt:"heartbeat"})]),n("p",null,"\u8FDB\u884C\u5BC6\u94A5\u534F\u5546\u65F6\uFF0C\u6BCF\u4E2A peer \u7684\u884C\u4E3A\u90FD\u662F\u5BF9\u79F0\u7684\uFF0C\u4E0D\u505C\u7684\u7B7E\u53D1\u5BC6\u94A5\u5E76\u5E7F\u64AD\u76F4\u5230\u8FD9\u4E2A\u5BC6\u94A5\u662F\u6240\u6709\u4EBA\u90FD\u7B7E\u540D\u8FC7\u7684\u5BC6\u94A5\u624D\u505C\u6B62\u3002"),n("p",null,"\u4E3A\u4E86\u5E94\u5BF9\u4E22\u5305\u6216\u8005\u662F peerList \u5B58\u5728\u9519\u8BEF\u7684\u573A\u666F\uFF0C\u89E6\u53D1\u7B7E\u540D\u5982\u679C\u8D85\u65F6\uFF0C\u5219\u4F1A\u88AB\u4E2D\u6B62\u56DE\u5230\u804A\u5929\u7684\u72B6\u6001\u3002"),n("h2",null,"\u6548\u679C"),n("p",null,[n("img",{src:f,alt:"example"})])],-1),x="\u57FA\u4E8EDiffie-Hellman\u7684\u4E09\u65B9\u5BC6\u94A5\u4EA4\u6362\u7B97\u6CD5\u7684\u52A0\u5BC6\u804A\u5929\u5BA4",B="2021-06-20T20:05:23.000Z",S=["\u968F\u7B14"],v="./1.png",D={__name:"content",setup(w,{expose:t}){const a={title:"\u57FA\u4E8EDiffie-Hellman\u7684\u4E09\u65B9\u5BC6\u94A5\u4EA4\u6362\u7B97\u6CD5\u7684\u52A0\u5BC6\u804A\u5929\u5BA4",date:"2021-06-20T20:05:23.000Z",tags:["\u968F\u7B14"],coverImage:"./1.png"};return t({frontmatter:a}),(h,y)=>{const o=p;return u(),c(o,{frontmatter:a},{default:e(()=>[m]),_:1})}}};export{v as coverImage,B as date,D as default,S as tags,x as title};
