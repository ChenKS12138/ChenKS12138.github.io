{"componentChunkName":"component---src-pages-detail-tsx","path":"/detail/aa17b588-f992-5180-aaba-654e15e73bc2","result":{"pageContext":{"html":"<h1>前言</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/af192/collect-homework-first-version.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVQI123Nuw6CMBhAYd8BtCC0fy/0BkUpGgegAaPxFYyDu4mD778ZY6IOJmf9cmaEYy6p0Nw6kBYLDYUGaXMmcWGI0LlQuDA4A5inbLFk85R+mnWhW7eNdXUY+82unQ77MIUw9f04DONwOB1rv3JNbZ1XpdeV12UDoowQeeGcGkytUCvjtsp6wqsMTE4tiIqwkss6QjRC9Hf4PZ8v19v9IZTLQGKm4wTihMQJidA7/Je98RNH5iKfLntAkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"first-version\"\n        title=\"first-version\"\n        src=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/fcda8/collect-homework-first-version.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/12f09/collect-homework-first-version.png 148w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/e4a3f/collect-homework-first-version.png 295w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/fcda8/collect-homework-first-version.png 590w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/b8e39df40e3f0ea3ecd322d88367f7ab/af192/collect-homework-first-version.png 645w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>大一上时刚学会点 php，然后自己是学习委员，作为学习委员需要经常收电子版的实验报告，从 QQ 上将实验报告一份一份下载很麻烦，为了提高效率就萌生了写一个提交作业的网站的想法。在这里我第一个使用 mysql+php+python 搭建了一个项目，现在回头看，之前写的代码确实不怎么好。没有一个管理后台，每次有需要收新的实验报告时都要改代码。不够安全，由于不清楚如何使用 php 发起 smtp 邮件请求，就采用了使用 exec 函数调用 python 程序发送邮件的方案。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/29114/collect-homework-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVQoz5WQPU8CQRCGr5b4FWJrYsFPEvkQIcYQNP4JGyutjYmNvQJCYuIZpLDCQqIxxuTu5B9oQBdub2Z2zO7B+QEWvJlMM+8z785aS4XNeL4QzxfmMtlYMhVLpmbS2flcPlEsJYqlxfWNBV252XQmnGrD6tryVnFle8cqO07Z1VXx3KrnVTudi1br3LaP7auTZvOocXNQrx9e26ftdq3zqg2map5XcR2LxwXAvh90ey8P7fvbhv/2zlIy4rjRIqXGi5llAPXLs/29Xd8fMLOaZLOGAyITqdcjIgAQkes+Pz3ehTAgKiM0T1AmYAgjIhFFPYSRtAcnKQz7vlmNpMOJJMBASgmARGCs0TTsv+CfQqUIMQiCaNdE2z8wUfgRBlZTw8zc6310hZg6GYj6/b4Q4lMIUgpHR/6BvwCG0VAJWf+v6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"collect-homework-second-version\"\n        title=\"collect-homework-second-version\"\n        src=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/fcda8/collect-homework-2.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/12f09/collect-homework-2.png 148w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/e4a3f/collect-homework-2.png 295w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/fcda8/collect-homework-2.png 590w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/efc66/collect-homework-2.png 885w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/c83ae/collect-homework-2.png 1180w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/a6b8bce357ca87d33707dea1ad7bffd8/29114/collect-homework-2.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>后来大一下学会了点 Vue.js Node.js ，进行了重写了，使用了 ElementUI 这个组件库，解决了上一版的两个主要问题，了解到了 session、cookie、可以使用 gzip 这类压缩算法压缩 HTTP 响应，加快响应。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/29114/collect-homework-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABS0lEQVQoz52OUUsCQRSF9z+U1UuGKZFRlhH2UvifRcI0KnWhXIjUHiWiekrM2Zk7986Ms+7GrmL0IuThezjDuR+Mkz44386X0vlSavd4PVOYsZUrbmSL+2flvdPLVPZkM3uymNYzhbWdo/ThRa5YdlqdbjvB9fqu13O9l+bDc7XerFQb17XbRv2+Um1c3bitx8VB3/X6ba/f6vQcbaw2Vuk/cIFIpvvkuXc1JMMBSU3Un7OJNtYZ+zBmAiSBpDHjIGn0zbiQStuPz/fX14EyFiRJVD4H5seXnAMAMi4dX0hjdJhE67goRdbaKIoCG0yThGEYRdEkjrHT8G0cTIOAC4xl5gtJCpUWgKg0BwlIpI2QyJgPklBpVBqQQCKQHnxpJOUnMvoi/kNCXBbP+fS7ylkHmK9z+V8wPi+ryAuWyRyIA60oD0dsOGJL5B/VbzgX2oJlHwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"collect-homework-3\"\n        title=\"collect-homework-3\"\n        src=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/fcda8/collect-homework-3.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/12f09/collect-homework-3.png 148w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/e4a3f/collect-homework-3.png 295w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/fcda8/collect-homework-3.png 590w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/efc66/collect-homework-3.png 885w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/c83ae/collect-homework-3.png 1180w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/0faa1bd4b64320978508d31bb91dc2a3/29114/collect-homework-3.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>现在大三了，国庆期间又重写了代码，后端部分的代码试水了 golang，postgres，golang 有 python 的开发效率，有接近 C++的性能。我觉得这门语言设计者是个十足的偏执狂，golang 在代码格式的要求上要求很严格，<code>else if</code>是不换行的，代码格式不正确，编译不通过。前端部分，使用的技术栈是<code>react</code>+<code>redux</code>+<code>redux-saga</code>+<code>saga-duck</code>+<code>antd</code>，在实习期间了解到了<code>saga-duck</code>这个库，和<code>dvajs</code>有点类似，但是在与 typescript 的契合上更优，duck 间不仅有继承关系，还有组合关系。saga-duck 是使用了 ducks 模式管理了 redux 相关的一些代码，避免代码过于分散。在使用时，我没有使用官方的<code>duckRuntime</code>连接<code>redux</code>，我自己写了一个<code>useSagaDuckState</code>的 hook 函数，我认为并没有必要把所有页面组件级别的<code>state</code>都放在<code>store</code>中，使用<code>saga-duck</code>更多的是希望管理好当前页面的<code>state</code>，因此使用一个通过调用<code>useReducer</code>创建页面组件级别的<code>store</code>的<code>useSagaDuckState</code>的 hook 函数可能会更加符合场景需求。</p>\n<p>期间我也了解了 jwt、HTTP 缓存、webpack、docker 这些技术，尽管使用了一台带宽更小的服务器（1Mbps），但是加载效果依然不错。</p>\n<h2>服务端的配置优化</h2>\n<p>这部分的优化主要是在服务端的 nginx 中，通过配置资源类请求的响应头，来实现缓存。可以通过增加 <code>expire</code> <code>cache-control</code>这类响应头字段来使客户端对资源进行缓存，减轻服务端压力。<code>expire</code>可以规定资源的到期时间，在到期时间前，会直接使用缓存。使用<code>cache-control</code>响应头可以规定资源的缓存时间长度。同时，通过浏览器可以通过资源请求响应的 e-tag，和服务器端确认资源的新鲜程度。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/47ff6/collect-homework-http-cache.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRklEQVQ4y+2Tv27bMBDG9QLdurRA4IgUeSJFUqT+UKIkknYsJQ5qb26ADp2Lzt36FF37toWjovWQpZ3zDYfD8X53IPExKXU9hZ0xNUBeGbON22H0fT/GuLO2d25qms77bV3btu3bth/HIERpTGNMk7RtL5URhRgG/7Ash2U+HD7EuBsHP7jR+9i2XdNYP4W+GypT9/0wTbFt+7Ksks71+/t76yaSc910zm8LZQplBr81Tcel7sdg3VQoU1vnpihLU2ozTqEoZJICzgoO0mAuMBdUlCgvMBMgy4zLFDgRigp1S3NSKFBmQygUghecEJKwnFMCQChQ4IxXpmI5YzlTUuWQF7ww+nIpXWpKCOe8q1pdVsAKVshkXpZlub+720uptDY+RIAcIJ/nJcatUuV+vwghhRDDMPkQ1IPntRHpDWifHI/Hp6en88fz6XRyw9D3PckIIWSeZ2utUup4PAEApXQ/L3P0b799evP959uvP949frnAh8fHcRyllFpr51yWZZTSEAJjTCl1Pp+ttVrr3W4XQ6ROpfEBbU83+88J5xwhhJ8FAIyxLLuszvOcEEIpVUpxzrMsAwDOOWBCbzeweX8rfbLuWUUIWclrYYzX4hohf35cSjb6Lrnu+zNizV8sAsAlIXijdwn5F73Cr/B/wHS14LUTryxJfzcQ+gKMUIoQStN0/VtpmmKMEEIZxhQjgtElZhjhy+lfOMMbvU+cG7vOhRCt7aztQ4h13Y7DZGqLq4G2njQjlPXQdpWuGOOMFc+Rg2h/AYw/83JeKvUwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"collect-homework-http-cache.png\"\n        title=\"collect-homework-http-cache.png\"\n        src=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/fcda8/collect-homework-http-cache.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/12f09/collect-homework-http-cache.png 148w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/e4a3f/collect-homework-http-cache.png 295w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/fcda8/collect-homework-http-cache.png 590w,\nhttps://cdn.jsdelivr.net/gh/ChenKS12138/ChenKS12138.github.io/static/4d4c24c5e67c43b6afa5ede30e48549c/47ff6/collect-homework-http-cache.png 852w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>通过开启<code>gzip</code>这类压缩算法，可以优先降低实际传输的资源的大小</p>\n<p>HTTP2 提供了多路复用的功能，可以提高多个并发连接时的性能。</p>\n<h2>webpack 打包优化</h2>\n<h3>使用代码分割</h3>\n<p>这个是 webapck4 中新增的功能，我们可以将多个 chunk 中的共同的部分提取出来，减少重复的代码，从总体上减少传输量。同时对于 vendor_chunk 我们也可以对其进行拆分，将不怎么变动的依赖像 react、redux、antd 之类的，单独放在一个 js 文件中，以达到更好的利用 HTTP 缓存的目的。最初将多个 js 文件合并打包到一个文件里是为了减少 HTTP 连接数，但是现在 HTTP2 多个请求可同时在一个连接上并行执行，或许将这类的依赖拆分出来可以提升缓存效果。</p>\n<h3>使用懒加载</h3>\n<p>懒加载是 webpack 提供的一项能力，可以配合 React16 中的 Suspense 和 lazy 使用。从我的这个项目场景分析看，大部分的用户都是只访问主页的，只有少数用户会访问其他页面，因此这里有必要将其他页面代码分离出来，当需要进入其他页面时再进行加载。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> loadingElement <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loading</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> AuthPage <span class=\"token operator\">=</span> <span class=\"token function\">loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">loader</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">/*webpackChunkName: 'auth_page' */</span>\n      <span class=\"token string\">\"@/containers/AuthPage/AuthPage\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> loadingElement<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">minDuration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> HelpPage <span class=\"token operator\">=</span> <span class=\"token function\">loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">loader</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">/*webpackChunkName: 'help_page' */</span>\n      <span class=\"token string\">\"@/containers/HelpPage/HelpPage\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> loadingElement<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">minDuration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> AdminPage <span class=\"token operator\">=</span> <span class=\"token function\">loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">loader</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">/*webpackChunkName: 'admin_page' */</span>\n      <span class=\"token string\">\"@/containers/AdminPage/AdminPage\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> loadingElement<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">minDuration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AppWrapper</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/detail/:id\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/auth\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/auth/registry\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AuthPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/admin\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/admin/create\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AdminPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/help\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HelpPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GlobalStyle</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AppWrapper</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>分析打包结果</h3>\n<p>使用 webpack-bundle-analyzer 分析体积较大的 vendor，一些依赖可能体积很大，但是只需要使用少数的 api，就可以考虑自己实现一下相关的函数</p>\n<h2>加载效果优化</h2>\n<p>SPA 应用令人诟病的一点就是页面的加载白屏时间长，浏览器加载 html 文件后，还需要加载相关的 css、js 文件，我们可以在 React 在页面 mount 的标签中放上 loading，当相关文件加载完后，loading 会被自动替换。</p>","id":"aa17b588-f992-5180-aaba-654e15e73bc2","headings":[{"value":"前言","depth":1},{"value":"服务端的配置优化","depth":2},{"value":"webpack 打包优化","depth":2},{"value":"使用代码分割","depth":3},{"value":"使用懒加载","depth":3},{"value":"分析打包结果","depth":3},{"value":"加载效果优化","depth":2}],"date":"Saturday, October 10, 2020 4:50 PM","tags":["随笔"],"title":"web应用加载优化相关"}},"staticQueryHashes":["63159454"]}