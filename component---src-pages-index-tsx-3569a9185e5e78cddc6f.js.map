{"version":3,"sources":["webpack:///./src/pages/index.tsx"],"names":["Index","props","data","useBingInfo","responseData","error","createIndex","useCallback","children","backgroundSrc","images","url","appConfig","headerImages","about","content","HeaderContent","copyright","title","allMarkdownRemark","nodes","length","ArchivesContainer","map","item","id","excerpt","frontmatter","date","indexImage","index_img","tags","publicURL","ArchiveItem","key","ArchiveItemContent","onClick","navigate","ArchiveItemImage","style","backgroundImage","ArchiveItemRight","ArchiveItemTitle","ArchiveItemIntro","ArchiveItemOtherInfo","ArchiveItemMeta","Array","isArray","join","cursor","ArchivesEmpty","ArchivesEmptyTip","styled","div"],"mappings":"2FAAA,oIAQe,SAASA,EAAMC,GAAkB,QACtCC,EAASD,EAATC,KACR,EAA8BC,cAAvBC,EAAP,KAAqBC,EAArB,KAEMC,EAAcC,uBAClB,SAACC,GAAD,mBACE,kBAAC,IAAD,CACEC,cAAa,UACVL,GAAY,uBACWA,SADX,UACWA,EAAcM,cADzB,aACW,EAAuB,GAAGC,YAFvC,QAGXC,IAAUC,aAAaC,MAEzBC,QACE,kBAACC,EAAD,KAAgBZ,SAAhB,UAAgBA,EAAcM,cAA9B,iBAAgB,EAAuB,UAAvC,aAAgB,EAA2BO,WAE7CC,MAAM,YAEN,6BAAMV,MAGV,CAACJ,EAAcC,IAIjB,OAAMH,SAAF,UAAEA,EAAciB,yBAAhB,iBAAC,EAAkCC,aAAnC,OAAC,EAAyCC,OAOvCf,EACL,kBAACgB,EAAD,KACIpB,EAAaiB,kBAAkBC,MAAMG,KAAI,SAACC,GAC1C,IACEC,EAGED,EAHFC,GACAC,EAEEF,EAFFE,QAFF,EAIIF,EADFG,YAAeC,EAHjB,EAGiBA,KAAiBC,EAHlC,EAGuBC,UAAuBC,EAH9C,EAG8CA,KAAMb,EAHpD,EAGoDA,MAE9Cc,EAAYH,aAAH,EAAGA,EAAYG,UAC9B,OACE,kBAACC,EAAD,CAAaC,IAAKT,GAChB,kBAACU,EAAD,CAAoBC,QAAS,kBAAMC,mBAAS,WAAWZ,KACpDO,GACC,kBAACM,EAAD,CACEC,MAAO,CAAEC,gBAAiB,QAAQR,EAAV,QAG5B,kBAACS,EAAD,KACE,kBAACC,EAAD,KAAmBxB,GACnB,kBAACyB,EAAD,KAAmBjB,GACnB,kBAACkB,EAAD,KACE,kBAACC,EAAD,KAAkBjB,GAClB,kBAACiB,EAAD,KACGC,MAAMC,QAAQhB,GAAQA,EAAKiB,KAAK,KAAO,WAQtD,kBAACH,EAAD,CACET,QAAS,WACPC,mBAAS,UAEXE,MAAO,CAAEU,OAAQ,YAJnB,UArCK3C,EACL,kBAAC4C,EAAD,KACE,kBAACC,EAAD,eA+CR,IAAMD,EAAgBE,IAAOC,IAAV,2EAAGD,CAAH,qBAIbD,EAAmBC,IAAOC,IAAV,8EAAGD,CAAH,qHAUhB9B,EAAoB8B,IAAOC,IAAV,+EAAGD,CAAH,uFAQjBnB,EAAcmB,IAAOC,IAAV,yEAAGD,CAAH,8JAUXjB,EAAqBiB,IAAOC,IAAV,gFAAGD,CAAH,0HASlBd,EAAmBc,IAAOC,IAAV,8EAAGD,CAAH,gUAiBhBX,EAAmBW,IAAOC,IAAV,8EAAGD,CAAH,gEAOhBV,EAAmBU,IAAOC,IAAV,8EAAGD,CAAH,mHAShBT,EAAmBS,IAAOC,IAAV,8EAAGD,CAAH,mHAUhBR,EAAuBQ,IAAOC,IAAV,kFAAGD,CAAH,wGASpBP,EAAkBO,IAAOC,IAAV,8EAAGD,CAAH,gHAUfpC,EAAgBoC,IAAOC,IAAV,4EAAGD,CAAH","file":"component---src-pages-index-tsx-3569a9185e5e78cddc6f.js","sourcesContent":["import React, { useCallback } from \"react\";\nimport { graphql, PageProps, navigate } from \"gatsby\";\nimport styled from \"styled-components\";\n\nimport { Layout } from \"@/components\";\nimport { useBingInfo } from \"@/utils\";\nimport appConfig from \"@/app.config\";\n\nexport default function Index(props: PageProps) {\n  const { data } = props;\n  const [responseData, error] = useBingInfo();\n\n  const createIndex = useCallback(\n    (children: React.ReactElement): React.ReactElement => (\n      <Layout\n        backgroundSrc={\n          (responseData &&\n            `https://cn.bing.com${responseData?.images?.[0].url}`) ??\n          appConfig.headerImages.about\n        }\n        content={\n          <HeaderContent>{responseData?.images?.[0]?.copyright}</HeaderContent>\n        }\n        title=\"HomePage\"\n      >\n        <div>{children}</div>\n      </Layout>\n    ),\n    [responseData, error]\n  );\n\n  // 无文章判断\n  if (!(data as any)?.allMarkdownRemark?.nodes?.length)\n    return createIndex(\n      <ArchivesEmpty>\n        <ArchivesEmptyTip>暂无文章</ArchivesEmptyTip>\n      </ArchivesEmpty>\n    );\n\n  return createIndex(\n    <ArchivesContainer>\n      {(data as any).allMarkdownRemark.nodes.map((item: any) => {\n        const {\n          id,\n          excerpt,\n          frontmatter: { date, index_img: indexImage, tags, title },\n        } = item;\n        const publicURL = indexImage?.publicURL;\n        return (\n          <ArchiveItem key={id}>\n            <ArchiveItemContent onClick={() => navigate(`/detail/${id}`)}>\n              {publicURL && (\n                <ArchiveItemImage\n                  style={{ backgroundImage: `url(\"${publicURL}\")` }}\n                />\n              )}\n              <ArchiveItemRight>\n                <ArchiveItemTitle>{title}</ArchiveItemTitle>\n                <ArchiveItemIntro>{excerpt}</ArchiveItemIntro>\n                <ArchiveItemOtherInfo>\n                  <ArchiveItemMeta>{date}</ArchiveItemMeta>\n                  <ArchiveItemMeta>\n                    {Array.isArray(tags) ? tags.join(\" \") : \"\"}\n                  </ArchiveItemMeta>\n                </ArchiveItemOtherInfo>\n              </ArchiveItemRight>\n            </ArchiveItemContent>\n          </ArchiveItem>\n        );\n      })}\n      <ArchiveItemMeta\n        onClick={() => {\n          navigate(\"/list\");\n        }}\n        style={{ cursor: \"pointer\" }}\n      >\n        查看全部\n      </ArchiveItemMeta>\n    </ArchivesContainer>\n  );\n}\n\nconst ArchivesEmpty = styled.div`\n  min-width: 80vw;\n`;\n\nconst ArchivesEmptyTip = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #3c4858;\n  font-weight: 600;\n  font-size: 25px;\n`;\n\nconst ArchivesContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 960px;\n  max-width: 100%;\n`;\n\nconst ArchiveItem = styled.div`\n  width: 100%;\n  margin: 20px auto;\n  padding-bottom: 30px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  @media (prefers-color-scheme: dark) {\n    border-bottom-color: #6c757d;\n  }\n`;\n\nconst ArchiveItemContent = styled.div`\n  cursor: pointer;\n  display: flex;\n  justify-content: space-evenly;\n  @media screen and (max-width: 770px) {\n    flex-direction: column;\n  }\n`;\n\nconst ArchiveItemImage = styled.div`\n  width: 30%;\n  height: 160px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  overflow: hidden;\n  box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.24),\n    0 17px 50px 0 rgba(0, 0, 0, 0.19) !important;\n  @media screen and (max-width: 770px) {\n    width: 100%;\n  }\n  @media (prefers-color-scheme: dark) {\n    background-color: white;\n  }\n`;\n\nconst ArchiveItemRight = styled.div`\n  width: 65%;\n  @media screen and (max-width: 770px) {\n    width: 100%;\n  }\n`;\n\nconst ArchiveItemTitle = styled.div`\n  color: #3c4858;\n  font-weight: 700;\n  font-size: 1.5rem;\n  line-height: 2;\n  @media (prefers-color-scheme: dark) {\n    color: white;\n  }\n`;\nconst ArchiveItemIntro = styled.div`\n  font-size: 1rem;\n  color: #3c4858;\n  line-height: 1.5;\n  overflow: hidden;\n  @media (prefers-color-scheme: dark) {\n    color: white;\n  }\n`;\n\nconst ArchiveItemOtherInfo = styled.div`\n  margin-top: 10px;\n  display: flex;\n  align-items: center;\n  @media (prefers-color-scheme: dark) {\n    color: #e9ecef;\n  }\n`;\n\nconst ArchiveItemMeta = styled.div`\n  font-size: 1rem;\n  color: #3c4858;\n  line-height: 1.5;\n  margin: 0 5px;\n  @media (prefers-color-scheme: dark) {\n    color: white;\n  }\n`;\n\nconst HeaderContent = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 20px;\n  color: #ffffff;\n  text-align: center;\n  user-select: none;\n  max-width: 80vw;\n  width: 600px;\n  font-weight: 300;\n  @media (prefers-color-scheme: dark) {\n    color: white;\n  }\n`;\n\nexport const query = graphql`\n  {\n    allMarkdownRemark(\n      sort: { order: DESC, fields: frontmatter___date }\n      limit: 15 # filter: { frontmatter: { tags: { nin: \"leetcode\" } } }\n    ) {\n      nodes {\n        id\n        excerpt(pruneLength: 150, truncate: true)\n        frontmatter {\n          date(formatString: \"YYYY-MM-DD\")\n          title\n          tags\n          index_img {\n            publicURL\n          }\n        }\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}