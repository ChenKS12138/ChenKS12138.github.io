{"version":3,"file":"component---src-pages-list-tsx-12f264a9e052bda106ce.js","mappings":"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","sources":["webpack://chenks12138-blog/./src/pages/list.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport { PageProps, graphql, navigateTo, navigate } from \"gatsby\";\nimport styled from \"styled-components\";\n\nimport { Layout, Text, Space, DevideLine, BoxContainer } from \"@/components\";\n\nimport appConfig from \"@/app.config\";\n\ninterface FrontMatter {\n  date: string;\n  tags: Array<string>;\n  title: string;\n}\n\ninterface ArchiveItem {\n  frontmatter: FrontMatter;\n  id: string;\n}\n\nconst TAG_ALL = \"ALL\";\n\nfunction List(props: PageProps) {\n  const { data } = props;\n  const [currentTag, setCurrentTag] = useState(TAG_ALL);\n\n  const totalCount: number = (data as any).allMarkdownRemark.totalCount;\n  const nodes: Array<ArchiveItem> = (data as any).allMarkdownRemark.nodes;\n\n  const tags = useMemo(\n    () =>\n      Array.from(\n        new Set(\n          nodes.reduce(\n            (prev, current) =>\n              prev.concat(\n                Array.isArray(current?.frontmatter?.tags)\n                  ? current?.frontmatter?.tags\n                  : []\n              ),\n            [TAG_ALL]\n          )\n        )\n      ),\n    [nodes]\n  );\n\n  const groups = nodes.reduce((prevGroup, current) => {\n    const {\n      frontmatter: { date, title, tags },\n      id,\n    } = current;\n    const [year, MMDD] = date.split(\" \");\n    const targetGroup = prevGroup.find(x => x.year === year);\n    const currentNode = { MMDD, title, tags, id };\n\n    if (currentTag !== TAG_ALL && !tags.includes(currentTag)) return prevGroup;\n\n    if (targetGroup) {\n      targetGroup.nodes.push(currentNode);\n    } else {\n      prevGroup.push({\n        year,\n        nodes: [currentNode],\n      });\n    }\n    return prevGroup;\n  }, []);\n\n  return (\n    <Layout\n      backgroundSrc={appConfig.headerImages.archives}\n      height=\"500px\"\n      content={\n        <Text fontSize=\"2rem\" fontWeight=\"500\" lineHeight=\"1.2\" color=\"#ffffff\">\n          Archive\n        </Text>\n      }\n      title=\"Archives\"\n    >\n      <BoxContainer margin=\"0 auto\" width=\"960px\" maxWidth=\"90%\">\n        <Space flexWrap justify=\"start\">\n          {tags.map(tag => (\n            <Space key={tag} direction=\"vertical\">\n              <BoxContainer\n                onClick={() => {\n                  setCurrentTag(tag);\n                }}\n                key={tag}\n                padding=\"0.5rem 1rem\"\n                style={{\n                  cursor: \"pointer\",\n                  transition: \"all 0.2s ease-in-out\",\n                }}\n              >\n                {tag === currentTag ? (\n                  <TagSelected>\n                    <BoxContainer padding=\"0.5rem 0.5rem\">\n                      <Text color=\"#ffffff\">{tag}</Text>\n                    </BoxContainer>\n                  </TagSelected>\n                ) : (\n                  <BoxContainer padding=\"0.5rem 0.5rem\">\n                    <Text\n                      color=\"#3c4858\"\n                      fontSize=\"1rem\"\n                      lineHeight=\"1.5\"\n                      fontWeight=\"300\"\n                    >\n                      {tag}\n                    </Text>\n                  </BoxContainer>\n                )}\n              </BoxContainer>\n            </Space>\n          ))}\n        </Space>\n        {currentTag === TAG_ALL && (\n          <BoxContainer marginTop=\"1rem\" paddingBottom=\"1rem\">\n            <Text fontWeight=\"300\" color=\"#3c4858\">\n              Total:{totalCount}\n            </Text>\n          </BoxContainer>\n        )}\n        <DevideLine\n          width=\"100%\"\n          lineWidth=\"1px\"\n          lineStyle=\"solid\"\n          lineColor=\"rgba(0, 0, 0, 0.1)\"\n        />\n        <Space direction=\"vertical\" align=\"start\">\n          {groups.map(\n            (group: {\n              year: string;\n              nodes: Array<{\n                id: string;\n                title: string;\n                tags: Array<string>;\n                MMDD: string;\n              }>;\n            }) => (\n              <BoxContainer margin=\"20px auto\" width=\"100%\" key={group.year}>\n                <Space direction=\"vertical\">\n                  <Text\n                    fontSize=\"1.25rem\"\n                    fontWeight=\"500\"\n                    lineHeight=\"1.2\"\n                    color=\"#3c4858\"\n                  >\n                    {group.year}\n                  </Text>\n                  <Space direction=\"vertical\" align=\"start\">\n                    {group.nodes.map(node => (\n                      <BoxContainer\n                        padding=\"0.75rem 1.25rem\"\n                        width=\"100%\"\n                        key={node.id}\n                      >\n                        <Space\n                          style={{\n                            cursor: \"pointer\",\n                          }}\n                          align=\"center\"\n                          onClick={() => navigate(`/detail/${node.id}`)}\n                          justify=\"space-between\"\n                        >\n                          <Text\n                            color=\"#495057\"\n                            fontWeight=\"300\"\n                            fontSize=\"1rem\"\n                          >\n                            {node.title}\n                          </Text>\n                          <Text\n                            color=\"#495057\"\n                            fontWeight=\"300\"\n                            fontSize=\"1rem\"\n                          >\n                            {node.MMDD}\n                          </Text>\n                        </Space>\n                      </BoxContainer>\n                    ))}\n                  </Space>\n                </Space>\n              </BoxContainer>\n            )\n          )}\n        </Space>\n      </BoxContainer>\n    </Layout>\n  );\n}\n\nexport default List;\n\nconst TagSelected = styled.div`\n  background-color: #ff4f5e;\n  border-radius: 0.25rem;\n  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\n`;\n\nexport const query = graphql`\n  {\n    allMarkdownRemark(sort: { fields: frontmatter___date, order: DESC }) {\n      totalCount\n      nodes {\n        id\n        frontmatter {\n          date(formatString: \"YYYY MM-DD\")\n          tags\n          title\n        }\n      }\n    }\n  }\n`;\n"],"names":["TAG_ALL","props","data","useState","currentTag","setCurrentTag","totalCount","allMarkdownRemark","nodes","tags","useMemo","Array","from","Set","reduce","prev","current","concat","isArray","frontmatter","_current$frontmatter","_current$frontmatter2","groups","prevGroup","date","title","id","split","year","MMDD","targetGroup","find","x","currentNode","includes","push","React","Layout","backgroundSrc","appConfig","height","content","Text","fontSize","fontWeight","lineHeight","color","BoxContainer","margin","width","maxWidth","Space","flexWrap","justify","map","tag","key","direction","onClick","padding","style","cursor","transition","TagSelected","marginTop","paddingBottom","DevideLine","lineWidth","lineStyle","lineColor","align","group","node","navigate","styled"],"sourceRoot":""}